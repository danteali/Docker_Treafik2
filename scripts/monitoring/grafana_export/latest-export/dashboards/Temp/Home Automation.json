{
  "meta": {
    "type": "db",
    "canSave": true,
    "canEdit": true,
    "canAdmin": true,
    "canStar": false,
    "canDelete": true,
    "slug": "home-automation",
    "url": "/d/de3d8dbc-8de7-4d1f-b080-b11cb4eb5492/home-automation",
    "hasAcl": false,
    "isFolder": false,
    "folderId": 33,
    "folderUid": "f0003a8d-61d3-44ca-a649-b4ffa1df0ed3",
    "folderTitle": "Temp",
    "folderUrl": "/dashboards/f/f0003a8d-61d3-44ca-a649-b4ffa1df0ed3/temp",
    "provisioned": false,
    "provisionedExternalId": "",
    "annotationsPermissions": {
      "dashboard": {
        "canAdd": true,
        "canEdit": true,
        "canDelete": true
      },
      "organization": {
        "canAdd": true,
        "canEdit": true,
        "canDelete": true
      }
    }
  },
  "dashboard": {
    "annotations": {
      "list": [
        {
          "builtIn": 1,
          "datasource": {
            "type": "grafana",
            "uid": "-- Grafana --"
          },
          "enable": true,
          "hide": true,
          "iconColor": "rgba(0, 211, 255, 1)",
          "name": "Annotations & Alerts",
          "type": "dashboard"
        }
      ]
    },
    "editable": true,
    "fiscalYearStartMonth": 0,
    "graphTooltip": 0,
    "id": 43,
    "links": [],
    "liveNow": false,
    "panels": [
      {
        "datasource": {
          "default": true,
          "type": "prometheus",
          "uid": "P4169E866C3094E38"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisBorderShow": false,
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "barWidthFactor": 0.6,
              "drawStyle": "line",
              "fillOpacity": 0,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "insertNulls": false,
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "auto",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "watt"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 8,
          "w": 12,
          "x": 0,
          "y": 0
        },
        "id": 130,
        "options": {
          "legend": {
            "calcs": [
              "firstNotNull",
              "lastNotNull",
              "min",
              "max",
              "mean"
            ],
            "displayMode": "table",
            "placement": "bottom",
            "showLegend": true
          },
          "tooltip": {
            "mode": "single",
            "sort": "none"
          }
        },
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "P4169E866C3094E38"
            },
            "editorMode": "code",
            "expr": "shelly1PM04_power",
            "instant": false,
            "legendFormat": "__auto",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "Shelly Energy Monitor",
        "type": "timeseries"
      },
      {
        "collapsed": true,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 8
        },
        "id": 2,
        "panels": [
          {
            "datasource": {
              "type": "datasource",
              "uid": "-- Mixed --"
            },
            "description": "Octograph Gas Consumption may be slightly off if calorific value/volumetric correction is not 100% accurate.",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisBorderShow": false,
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "barWidthFactor": 0.6,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "insertNulls": false,
                  "lineInterpolation": "stepBefore",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "always",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "decimals": 3,
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                }
              },
              "overrides": [
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/.*Charge.*/"
                  },
                  "properties": [
                    {
                      "id": "unit",
                      "value": "currencyGBP"
                    },
                    {
                      "id": "decimals",
                      "value": 4
                    },
                    {
                      "id": "custom.spanNulls",
                      "value": true
                    },
                    {
                      "id": "custom.axisPlacement",
                      "value": "left"
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/.*(Cost|COST).*/"
                  },
                  "properties": [
                    {
                      "id": "unit",
                      "value": "currencyGBP"
                    },
                    {
                      "id": "decimals",
                      "value": 4
                    },
                    {
                      "id": "custom.spanNulls",
                      "value": true
                    },
                    {
                      "id": "custom.axisPlacement",
                      "value": "left"
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/.*\\(kWh\\).*/"
                  },
                  "properties": [
                    {
                      "id": "unit",
                      "value": "kwatth"
                    },
                    {
                      "id": "custom.axisPlacement",
                      "value": "right"
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/.*m³.*/"
                  },
                  "properties": [
                    {
                      "id": "unit",
                      "value": "m³"
                    },
                    {
                      "id": "custom.axisPlacement",
                      "value": "right"
                    }
                  ]
                }
              ]
            },
            "gridPos": {
              "h": 11,
              "w": 24,
              "x": 0,
              "y": 9
            },
            "id": 1,
            "options": {
              "legend": {
                "calcs": [
                  "lastNotNull",
                  "min",
                  "max",
                  "mean",
                  "sum"
                ],
                "displayMode": "table",
                "placement": "bottom",
                "showLegend": true,
                "sortBy": "Name",
                "sortDesc": false
              },
              "tooltip": {
                "mode": "multi",
                "sort": "asc"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "disableTextWrap": false,
                "editorMode": "code",
                "expr": "avg_over_time(ha_sensor_monetary_gbp{entity=~\"sensor.octopus_energy_electricity_.*_current_standing_charge\"}[1d])",
                "fullMetaSearch": false,
                "hide": true,
                "includeNullMetadata": true,
                "instant": false,
                "interval": "1d",
                "legendFormat": "Electricity - Charge - Standing [HA]",
                "range": true,
                "refId": "Electricity - Standing Charge [HA]",
                "useBackend": false
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "disableTextWrap": false,
                "editorMode": "code",
                "expr": "avg_over_time(ha_sensor_monetary_gbp_per_kwh{entity=~\"sensor.octopus_energy_electricity_.*_current_rate\"}[1d])",
                "fullMetaSearch": false,
                "hide": true,
                "includeNullMetadata": true,
                "instant": false,
                "interval": "1d",
                "legendFormat": "Electricity - Charge - Unit (per kWh) [HA]",
                "range": true,
                "refId": "Electricity - Unit Cost (per kWh) [HA]",
                "useBackend": false
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "disableTextWrap": false,
                "editorMode": "code",
                "expr": "ha_sensor_energy_kwh{entity=~\"sensor.octopus_energy_electricity_.*_previous_accumulative_consumption\"} offset -24h",
                "fullMetaSearch": false,
                "hide": true,
                "includeNullMetadata": true,
                "instant": false,
                "interval": "1d",
                "legendFormat": "Electricity - Consumption - Daily (kWh) [HA]",
                "range": true,
                "refId": "Electricity - Consumption (kWh) [HA]",
                "useBackend": false
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "code",
                "expr": "avg_over_time(ha_sensor_monetary_gbp_per_kwh{entity=~\"sensor.octopus_energy_electricity_.*_current_rate\"}[1d]) *\r\nsum(ha_sensor_energy_kwh{entity=~\"sensor.octopus_energy_electricity_.*_previous_accumulative_consumption\"} offset -24h)",
                "hide": true,
                "interval": "1d",
                "legendFormat": "Electricity - Consumption Cost - Daily [Consumption=HA; Unit Charge=HA]",
                "range": true,
                "refId": "Electricity - Usage Cost [HA]"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "disableTextWrap": false,
                "editorMode": "code",
                "expr": "avg_over_time(avg(ha_sensor_monetary_gbp{entity=~\"sensor.octopus_energy_gas_.*_current_standing_charge\"})[1d])",
                "fullMetaSearch": false,
                "hide": false,
                "includeNullMetadata": true,
                "instant": false,
                "interval": "1d",
                "legendFormat": "Gas - Charge - Standing [HA]",
                "range": true,
                "refId": "Gas - Standing Charge [HA]",
                "useBackend": false
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "disableTextWrap": false,
                "editorMode": "code",
                "expr": "avg_over_time(avg(ha_sensor_monetary_gbp_per_kwh{entity=~\"sensor.octopus_energy_gas_.*_current_rate\"})[1d])",
                "fullMetaSearch": false,
                "hide": false,
                "includeNullMetadata": true,
                "instant": false,
                "interval": "1d",
                "legendFormat": "Gas - Charge - Unit (per kWh) [HA]",
                "range": true,
                "refId": "Gas - Unit Cost (per kWh) [HA]",
                "useBackend": false
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "disableTextWrap": false,
                "editorMode": "code",
                "expr": "ha_sensor_gas_mu0xb3{entity=~\"sensor.octopus_energy_gas_.*_previous_accumulative_consumption\"} offset -24h",
                "fullMetaSearch": false,
                "hide": true,
                "includeNullMetadata": true,
                "instant": false,
                "interval": "1d",
                "legendFormat": "Gas - Consumption - Daily (m³) [HA]",
                "range": true,
                "refId": "Gas - Consumption (m³) [HA]",
                "useBackend": false
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "disableTextWrap": false,
                "editorMode": "code",
                "expr": "ha_sensor_energy_kwh{entity=~\"sensor.octopus_energy_gas_.*_previous_accumulative_consumption_kwh\"} offset -24h",
                "fullMetaSearch": false,
                "hide": false,
                "includeNullMetadata": true,
                "instant": false,
                "interval": "1d",
                "legendFormat": "Gas - Consumption - Daily (kWh) [HA]",
                "range": true,
                "refId": "Gas - Consumption (kWh) [HA]",
                "useBackend": false
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "code",
                "expr": "avg_over_time(ha_sensor_monetary_gbp_per_kwh{entity=~\"sensor.octopus_energy_gas_.*_current_rate\"}[1d]) *\r\nsum(ha_sensor_energy_kwh{entity=~\"sensor.octopus_energy_gas_.*_previous_accumulative_consumption_kwh\"} offset -24h)",
                "hide": false,
                "interval": "1d",
                "legendFormat": "Gas - Consumption Cost - Daily [Consumption=HA; Unit Charge=HA]",
                "range": true,
                "refId": "Gas - Usage Cost [HA]"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "code",
                "exemplar": false,
                "expr": "sum_over_time(electricity_consumption[$interval_consumption:30m])",
                "hide": true,
                "instant": false,
                "interval": "$interval_consumption",
                "legendFormat": "Electricity - Consumption (kWh) [Octograph]",
                "range": true,
                "refId": "Electricity - Consumption (kWh) [Octograph]"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "code",
                "expr": "avg_over_time(octopus_energy_unitrate_electricity_pence[$interval_consumption:30m] / 100) *\r\nsum(sum_over_time(electricity_consumption[$interval_consumption:30m]))",
                "hide": true,
                "interval": "$interval_consumption",
                "legendFormat": "Electricity - Consumption Cost [Consumption=Octograph; Unit Charge=API]",
                "range": true,
                "refId": "Electricity - Usage Cost [Consumption:Octograph; Unit Cost:API]"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "code",
                "exemplar": false,
                "expr": "sum_over_time(gas_consumption[$interval_consumption:30m])",
                "hide": true,
                "instant": false,
                "interval": "$interval_consumption",
                "legendFormat": "Gas - Consumption (m³) [Octograph]",
                "range": true,
                "refId": "Gas - Consumption (m³) [Octograph]"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "code",
                "exemplar": false,
                "expr": "sum_over_time(gas_consumption[$interval_consumption:30m]) * $gas_cal_value * $gas_vol_correction / 3.6",
                "hide": false,
                "instant": false,
                "interval": "$interval_consumption",
                "legendFormat": "Gas - Consumption (kWh) [Octograph] (from volumetric/calorific values)",
                "range": true,
                "refId": "Gas - Consumption (kWh) [Octograph] - from volumetric/calorific values"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "code",
                "expr": "avg_over_time(octopus_energy_unitrate_gas_pence[$interval_consumption:30m] / 100) *\r\nsum(sum_over_time(gas_consumption[$interval_consumption:30m]) * $gas_cal_value * $gas_vol_correction / 3.6)",
                "hide": false,
                "interval": "$interval_consumption",
                "legendFormat": "Gas - Consumption Cost [Consumption=Octograph; Unit Charge=API]",
                "range": true,
                "refId": "Gas - Usage Cost [Consumption:Octograph; Unit Cost:API]"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "code",
                "expr": "increase(shellyem_0_total[$__rate_interval])/1000",
                "hide": true,
                "interval": "$interval_consumption",
                "legendFormat": "Electricity - Consumption (kWh) [ShellyEM MQTT->VMA]",
                "range": true,
                "refId": "Electricity - ShellyEM Electricity Consumption (kWh) [MQTT->VMA]"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "code",
                "expr": "increase(interpolate(shellyem_0_total)[$__rate_interval])/1000",
                "hide": true,
                "interval": "$interval_consumption",
                "legendFormat": "Electricity - Consumption (kWh) [ShellyEM MQTT->VMA] INTERPOLATED",
                "range": true,
                "refId": "Electricity - ShellyEM Electricity Consumption (kWh) [MQTT->VMA] INTERPOLATED"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "code",
                "expr": "avg_over_time(octopus_energy_unitrate_electricity_pence[$interval_consumption:30m] / 100) *\r\nsum(increase(shellyem_0_total[$__rate_interval])/1000)",
                "hide": true,
                "interval": "$interval_consumption",
                "legendFormat": "Electricity - Consumption Cost [Consumption=ShellyEM; Unit Charge=API]",
                "range": true,
                "refId": "Electricity - Usage Cost [Consumption=ShellyEM; Unit Cost=API]"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "disableTextWrap": false,
                "editorMode": "code",
                "expr": "avg_over_time(octopus_energy_standingcharge_electricity_pence[1d:12h] / 100)",
                "fullMetaSearch": false,
                "hide": true,
                "includeNullMetadata": true,
                "instant": false,
                "interval": "1d",
                "legendFormat": "Electricity - Charge - Standing [API->VMIMPORT]",
                "range": true,
                "refId": "Electricity - Standing Charge [API->VMIMPORT]",
                "useBackend": false
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "disableTextWrap": false,
                "editorMode": "code",
                "expr": "avg_over_time(octopus_energy_unitrate_electricity_pence[1d:12h] / 100)",
                "fullMetaSearch": false,
                "hide": true,
                "includeNullMetadata": true,
                "instant": false,
                "interval": "1d",
                "legendFormat": "Electricity - Charge - Unit (per kWh) [API->VMIMPORT]",
                "range": true,
                "refId": "Electricity - Unit Cost (per kWh) [API->VMIMPORT]",
                "useBackend": false
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "disableTextWrap": false,
                "editorMode": "code",
                "expr": "avg_over_time(octopus_energy_standingcharge_gas_pence[1d:12h] / 100)",
                "fullMetaSearch": false,
                "hide": false,
                "includeNullMetadata": true,
                "instant": false,
                "interval": "1d",
                "legendFormat": "Gas - Charge - Standing [API->VMIMPORT]",
                "range": true,
                "refId": "Gas - Standing Charge [API->VMIMPORT]",
                "useBackend": false
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "disableTextWrap": false,
                "editorMode": "code",
                "expr": "avg_over_time(octopus_energy_unitrate_gas_pence[1d:12h] / 100)",
                "fullMetaSearch": false,
                "hide": false,
                "includeNullMetadata": true,
                "instant": false,
                "interval": "1d",
                "legendFormat": "Gas - Charge - Unit (per kWh) [API->VMIMPORT]",
                "range": true,
                "refId": "Gas - Unit Cost (per kWh) [API->VMIMPORT]",
                "useBackend": false
              }
            ],
            "timeShift": "1d/d",
            "title": "All Energy Metrics - NEED TO UPDATE ONCE DATASET ESTABLISHED",
            "transformations": [
              {
                "id": "calculateField",
                "options": {
                  "alias": "Electricity - COST - TOTAL Daily [HA]",
                  "binary": {
                    "left": "Electricity - Consumption Cost - Daily [Consumption=HA; Unit Charge=HA]",
                    "reducer": "sum",
                    "right": "Electricity - Charge - Standing [HA]"
                  },
                  "mode": "binary",
                  "reduce": {
                    "reducer": "sum"
                  }
                }
              },
              {
                "id": "calculateField",
                "options": {
                  "alias": "Electricity - COST - TOTAL [Consumption:Octograph; Cost:API]",
                  "binary": {
                    "left": "Electricity - Consumption Cost [Consumption=Octograph; Unit Charge=API]",
                    "reducer": "sum",
                    "right": "Electricity - Charge - Standing [API->VMIMPORT]"
                  },
                  "mode": "binary",
                  "reduce": {
                    "reducer": "sum"
                  }
                }
              },
              {
                "id": "calculateField",
                "options": {
                  "alias": "Electricity - COST - TOTAL   [Consumption=ShellyEM; Cost=API]",
                  "binary": {
                    "left": "Electricity - Consumption Cost [Consumption=ShellyEM; Unit Charge=API]",
                    "reducer": "sum",
                    "right": "Electricity - Charge - Standing [API->VMIMPORT]"
                  },
                  "mode": "binary",
                  "reduce": {
                    "reducer": "sum"
                  }
                }
              },
              {
                "disabled": true,
                "id": "calculateField",
                "options": {
                  "alias": "USE QUERY INSTEAD SINCE CAN'T USE THIS CALC IN OTHER CALC TRANSFORM - KEEP TO COMPARE VALUES | Electricity - Daily Usage Cost [Consumption=HA; Unit Charge=HA]",
                  "binary": {
                    "left": "Electricity - Consumption - Daily (kWh) [HA]",
                    "operator": "*",
                    "reducer": "sum",
                    "right": "Electricity - Charge - Unit (per kWh) [HA]"
                  },
                  "mode": "binary",
                  "reduce": {
                    "reducer": "sum"
                  },
                  "replaceFields": false
                }
              },
              {
                "disabled": true,
                "id": "calculateField",
                "options": {
                  "alias": "USE QUERY INSTEAD SINCE CAN'T USE THIS CALC IN OTHER CALC TRANSFORM - KEEP TO COMPARE VALUES | Electricity - Usage Cost [Consumption=Octograph; Unit Charge=API]",
                  "binary": {
                    "left": "Gas - Consumption (kWh) [Octograph] (from volumetric/calorific values)",
                    "operator": "*",
                    "reducer": "sum",
                    "right": "Electricity - Charge - Unit (per kWh) [API->VMIMPORT]"
                  },
                  "mode": "binary",
                  "reduce": {
                    "reducer": "sum"
                  }
                }
              },
              {
                "disabled": true,
                "id": "calculateField",
                "options": {
                  "alias": "USE QUERY INSTEAD SINCE CAN'T USE THIS CALC IN OTHER CALC TRANSFORM - KEEP TO COMPARE VALUES | Electricity - Usage Cost [Consumption=Shelly; Unit Charge=API]",
                  "binary": {
                    "left": "Electricity - Consumption (kWh) [ShellyEM MQTT->VMA]",
                    "operator": "*",
                    "reducer": "sum",
                    "right": "Electricity - Charge - Unit (per kWh) [API->VMIMPORT]"
                  },
                  "mode": "binary",
                  "reduce": {
                    "include": [
                      "Electricity - ShellyEM Electricity Consumption (kWh) [MQTT->VMA]"
                    ],
                    "reducer": "sum"
                  }
                }
              },
              {
                "id": "calculateField",
                "options": {
                  "alias": "Gas - COST - TOTAL - Daily [HA]",
                  "binary": {
                    "left": "Gas - Consumption Cost - Daily [Consumption=HA; Unit Charge=HA]",
                    "reducer": "sum",
                    "right": "Gas - Charge - Standing [HA]"
                  },
                  "mode": "binary",
                  "reduce": {
                    "reducer": "sum"
                  }
                }
              },
              {
                "id": "calculateField",
                "options": {
                  "alias": "Gas - COST - TOTAL [Consumption:Octograph; Cost:API]",
                  "binary": {
                    "left": "Gas - Consumption Cost [Consumption=Octograph; Unit Charge=API]",
                    "reducer": "sum",
                    "right": "Gas - Charge - Standing [API->VMIMPORT]"
                  },
                  "mode": "binary",
                  "reduce": {
                    "reducer": "sum"
                  }
                }
              },
              {
                "disabled": true,
                "id": "calculateField",
                "options": {
                  "alias": "USE QUERY INSTEAD SINCE CAN'T USE THIS CALC IN OTHER CALC TRANSFORM - KEEP TO COMPARE VALUES | Gas - Daily Usage Cost [Consumption=HA; Unit Charge=HA]",
                  "binary": {
                    "left": "Gas - Consumption - Daily (kWh) [HA]",
                    "operator": "*",
                    "reducer": "sum",
                    "right": "Gas - Charge - Unit (per kWh) [HA]"
                  },
                  "mode": "binary",
                  "reduce": {
                    "reducer": "sum"
                  }
                }
              },
              {
                "disabled": true,
                "id": "calculateField",
                "options": {
                  "alias": "USE QUERY INSTEAD SINCE CAN'T USE THIS CALC IN OTHER CALC TRANSFORM - KEEP TO COMPARE VALUES | Gas - Usage Cost [Consumption=Octograph; Unit Charge=API]",
                  "binary": {
                    "left": "Gas - Consumption (kWh) [Octograph] (from volumetric/calorific values)",
                    "operator": "*",
                    "reducer": "sum",
                    "right": "Gas - Charge - Unit (per kWh) [API->VMIMPORT]"
                  },
                  "mode": "binary",
                  "reduce": {
                    "reducer": "sum"
                  },
                  "replaceFields": false
                }
              }
            ],
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "datasource",
              "uid": "-- Mixed --"
            },
            "description": "Octograph Gas Consumption may be slightly off if calorific value/volumetric correction is not 100% accurate.",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisBorderShow": false,
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "barWidthFactor": 0.6,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "insertNulls": false,
                  "lineInterpolation": "stepBefore",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "always",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "decimals": 3,
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                }
              },
              "overrides": [
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/.*Charge.*/"
                  },
                  "properties": [
                    {
                      "id": "unit",
                      "value": "currencyGBP"
                    },
                    {
                      "id": "decimals",
                      "value": 4
                    },
                    {
                      "id": "custom.spanNulls",
                      "value": true
                    },
                    {
                      "id": "custom.axisPlacement",
                      "value": "left"
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/.*(Cost|COST).*/"
                  },
                  "properties": [
                    {
                      "id": "unit",
                      "value": "currencyGBP"
                    },
                    {
                      "id": "decimals",
                      "value": 4
                    },
                    {
                      "id": "custom.spanNulls",
                      "value": true
                    },
                    {
                      "id": "custom.axisPlacement",
                      "value": "left"
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/.*\\(kWh\\).*/"
                  },
                  "properties": [
                    {
                      "id": "unit",
                      "value": "kwatth"
                    },
                    {
                      "id": "custom.axisPlacement",
                      "value": "right"
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/.*m³.*/"
                  },
                  "properties": [
                    {
                      "id": "unit",
                      "value": "m³"
                    },
                    {
                      "id": "custom.axisPlacement",
                      "value": "right"
                    }
                  ]
                }
              ]
            },
            "gridPos": {
              "h": 11,
              "w": 24,
              "x": 0,
              "y": 20
            },
            "id": 129,
            "options": {
              "legend": {
                "calcs": [
                  "lastNotNull",
                  "min",
                  "max",
                  "mean",
                  "sum"
                ],
                "displayMode": "table",
                "placement": "bottom",
                "showLegend": true,
                "sortBy": "Name",
                "sortDesc": false
              },
              "tooltip": {
                "mode": "multi",
                "sort": "asc"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "disableTextWrap": false,
                "editorMode": "code",
                "expr": "avg_over_time(ha_sensor_monetary_gbp{entity=~\"sensor.octopus_energy_electricity_.*_current_standing_charge\"}[1d]) offset -24h",
                "fullMetaSearch": false,
                "hide": true,
                "includeNullMetadata": true,
                "instant": false,
                "interval": "1d",
                "legendFormat": "Electricity - Charge - Standing [HA]",
                "range": true,
                "refId": "Electricity - Standing Charge [HA]",
                "useBackend": false
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "disableTextWrap": false,
                "editorMode": "code",
                "expr": "avg_over_time(ha_sensor_monetary_gbp_per_kwh{entity=~\"sensor.octopus_energy_electricity_.*_current_rate\"}[1d]) offset -24h",
                "fullMetaSearch": false,
                "hide": true,
                "includeNullMetadata": true,
                "instant": false,
                "interval": "1d",
                "legendFormat": "Electricity - Charge - Unit (per kWh) [HA]",
                "range": true,
                "refId": "Electricity - Unit Cost (per kWh) [HA]",
                "useBackend": false
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "disableTextWrap": false,
                "editorMode": "code",
                "expr": "ha_sensor_energy_kwh{entity=~\"sensor.octopus_energy_electricity_.*_previous_accumulative_consumption\"} offset -24h",
                "fullMetaSearch": false,
                "hide": false,
                "includeNullMetadata": true,
                "instant": false,
                "interval": "1d",
                "legendFormat": "Electricity - Consumption - Daily (kWh) [HA]",
                "range": true,
                "refId": "Electricity - Consumption (kWh) [HA]",
                "useBackend": false
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "code",
                "expr": "avg_over_time(ha_sensor_monetary_gbp_per_kwh{entity=~\"sensor.octopus_energy_electricity_.*_current_rate\"}[1d]) *\r\nsum(ha_sensor_energy_kwh{entity=~\"sensor.octopus_energy_electricity_.*_previous_accumulative_consumption\"} offset -24h)",
                "hide": true,
                "interval": "1d",
                "legendFormat": "Electricity - Consumption Cost - Daily [Consumption=HA; Unit Charge=HA]",
                "range": true,
                "refId": "Electricity - Usage Cost [HA]"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "disableTextWrap": false,
                "editorMode": "code",
                "expr": "avg_over_time(avg(ha_sensor_monetary_gbp{entity=~\"sensor.octopus_energy_gas_.*_current_standing_charge\"})[1d])",
                "fullMetaSearch": false,
                "hide": true,
                "includeNullMetadata": true,
                "instant": false,
                "interval": "1d",
                "legendFormat": "Gas - Charge - Standing [HA]",
                "range": true,
                "refId": "Gas - Standing Charge [HA]",
                "useBackend": false
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "disableTextWrap": false,
                "editorMode": "code",
                "expr": "avg_over_time(avg(ha_sensor_monetary_gbp_per_kwh{entity=~\"sensor.octopus_energy_gas_.*_current_rate\"})[1d])",
                "fullMetaSearch": false,
                "hide": true,
                "includeNullMetadata": true,
                "instant": false,
                "interval": "1d",
                "legendFormat": "Gas - Charge - Unit (per kWh) [HA]",
                "range": true,
                "refId": "Gas - Unit Cost (per kWh) [HA]",
                "useBackend": false
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "disableTextWrap": false,
                "editorMode": "code",
                "expr": "ha_sensor_gas_mu0xb3{entity=~\"sensor.octopus_energy_gas_.*_previous_accumulative_consumption\"} offset -24h",
                "fullMetaSearch": false,
                "hide": true,
                "includeNullMetadata": true,
                "instant": false,
                "interval": "1d",
                "legendFormat": "Gas - Consumption - Daily (m³) [HA]",
                "range": true,
                "refId": "Gas - Consumption (m³) [HA]",
                "useBackend": false
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "disableTextWrap": false,
                "editorMode": "code",
                "expr": "ha_sensor_energy_kwh{entity=~\"sensor.octopus_energy_gas_.*_previous_accumulative_consumption_kwh\"} offset -24h",
                "fullMetaSearch": false,
                "hide": true,
                "includeNullMetadata": true,
                "instant": false,
                "interval": "1d",
                "legendFormat": "Gas - Consumption - Daily (kWh) [HA]",
                "range": true,
                "refId": "Gas - Consumption (kWh) [HA]",
                "useBackend": false
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "code",
                "expr": "avg_over_time(ha_sensor_monetary_gbp_per_kwh{entity=~\"sensor.octopus_energy_gas_.*_current_rate\"}[1d]) *\r\nsum(ha_sensor_energy_kwh{entity=~\"sensor.octopus_energy_gas_.*_previous_accumulative_consumption_kwh\"} offset -24h)",
                "hide": true,
                "interval": "1d",
                "legendFormat": "Gas - Consumption Cost - Daily [Consumption=HA; Unit Charge=HA]",
                "range": true,
                "refId": "Gas - Usage Cost [HA]"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "code",
                "exemplar": false,
                "expr": "sum_over_time(electricity_consumption[$interval_consumption:30m])",
                "hide": false,
                "instant": false,
                "interval": "$interval_consumption",
                "legendFormat": "Electricity - Consumption (kWh) [Octograph]",
                "range": true,
                "refId": "Electricity - Consumption (kWh) [Octograph]"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "code",
                "expr": "avg_over_time(octopus_energy_unitrate_electricity_pence[$interval_consumption:30m] / 100) *\r\nsum(sum_over_time(electricity_consumption[$interval_consumption:30m]))",
                "hide": true,
                "interval": "$interval_consumption",
                "legendFormat": "Electricity - Consumption Cost [Consumption=Octograph; Unit Charge=API]",
                "range": true,
                "refId": "Electricity - Usage Cost [Consumption:Octograph; Unit Cost:API]"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "code",
                "exemplar": false,
                "expr": "sum_over_time(gas_consumption[$interval_consumption:30m])",
                "hide": true,
                "instant": false,
                "interval": "$interval_consumption",
                "legendFormat": "Gas - Consumption (m³) [Octograph]",
                "range": true,
                "refId": "Gas - Consumption (m³) [Octograph]"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "code",
                "exemplar": false,
                "expr": "sum_over_time(gas_consumption[$interval_consumption:30m]) * $gas_cal_value * $gas_vol_correction / 3.6",
                "hide": true,
                "instant": false,
                "interval": "$interval_consumption",
                "legendFormat": "Gas - Consumption (kWh) [Octograph] (from volumetric/calorific values)",
                "range": true,
                "refId": "Gas - Consumption (kWh) [Octograph] - from volumetric/calorific values"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "code",
                "expr": "avg_over_time(octopus_energy_unitrate_gas_pence[$interval_consumption:30m] / 100) *\r\nsum(sum_over_time(gas_consumption[$interval_consumption:30m]) * $gas_cal_value * $gas_vol_correction / 3.6)",
                "hide": true,
                "interval": "$interval_consumption",
                "legendFormat": "Gas - Consumption Cost [Consumption=Octograph; Unit Charge=API]",
                "range": true,
                "refId": "Gas - Usage Cost [Consumption:Octograph; Unit Cost:API]"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "code",
                "expr": "increase(shellyem_0_total[$__rate_interval]) / 1000 ",
                "hide": false,
                "interval": "$interval_consumption",
                "legendFormat": "Electricity - Consumption (kWh) [ShellyEM MQTT->VMA]",
                "range": true,
                "refId": "Electricity - ShellyEM Electricity Consumption (kWh) [MQTT->VMA]"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "code",
                "expr": "increase(interpolate(shellyem_0_total)[$__rate_interval])/1000",
                "hide": true,
                "interval": "$interval_consumption",
                "legendFormat": "Electricity - Consumption (kWh) [ShellyEM MQTT->VMA] INTERPOLATED",
                "range": true,
                "refId": "Electricity - ShellyEM Electricity Consumption (kWh) [MQTT->VMA] INTERPOLATED"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "code",
                "expr": "avg_over_time(octopus_energy_unitrate_electricity_pence[$interval_consumption:30m] / 100) *\r\nsum(increase(shellyem_0_total[$__rate_interval])/1000)",
                "hide": true,
                "interval": "$interval_consumption",
                "legendFormat": "Electricity - Consumption Cost [Consumption=ShellyEM; Unit Charge=API]",
                "range": true,
                "refId": "Electricity - Usage Cost [Consumption=ShellyEM; Unit Cost=API]"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "disableTextWrap": false,
                "editorMode": "code",
                "expr": "avg_over_time(octopus_energy_standingcharge_electricity_pence[1d:12h] / 100)",
                "fullMetaSearch": false,
                "hide": true,
                "includeNullMetadata": true,
                "instant": false,
                "interval": "1d",
                "legendFormat": "Electricity - Charge - Standing [API->VMIMPORT]",
                "range": true,
                "refId": "Electricity - Standing Charge [API->VMIMPORT]",
                "useBackend": false
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "disableTextWrap": false,
                "editorMode": "code",
                "expr": "avg_over_time(octopus_energy_unitrate_electricity_pence[1d:12h] / 100)",
                "fullMetaSearch": false,
                "hide": true,
                "includeNullMetadata": true,
                "instant": false,
                "interval": "1d",
                "legendFormat": "Electricity - Charge - Unit (per kWh) [API->VMIMPORT]",
                "range": true,
                "refId": "Electricity - Unit Cost (per kWh) [API->VMIMPORT]",
                "useBackend": false
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "disableTextWrap": false,
                "editorMode": "code",
                "expr": "avg_over_time(octopus_energy_standingcharge_gas_pence[1d:12h] / 100)",
                "fullMetaSearch": false,
                "hide": true,
                "includeNullMetadata": true,
                "instant": false,
                "interval": "1d",
                "legendFormat": "Gas - Charge - Standing [API->VMIMPORT]",
                "range": true,
                "refId": "Gas - Standing Charge [API->VMIMPORT]",
                "useBackend": false
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "disableTextWrap": false,
                "editorMode": "code",
                "expr": "avg_over_time(octopus_energy_unitrate_gas_pence[1d:12h] / 100)",
                "fullMetaSearch": false,
                "hide": true,
                "includeNullMetadata": true,
                "instant": false,
                "interval": "1d",
                "legendFormat": "Gas - Charge - Unit (per kWh) [API->VMIMPORT]",
                "range": true,
                "refId": "Gas - Unit Cost (per kWh) [API->VMIMPORT]",
                "useBackend": false
              }
            ],
            "title": "TESTING - All Energy Metrics - NEED TO UPDATE ONCE DATASET ESTABLISHED",
            "transformations": [
              {
                "id": "calculateField",
                "options": {
                  "alias": "Electricity - COST - TOTAL Daily [HA]",
                  "binary": {
                    "left": "Electricity - Consumption Cost - Daily [Consumption=HA; Unit Charge=HA]",
                    "reducer": "sum",
                    "right": "Electricity - Charge - Standing [HA]"
                  },
                  "mode": "binary",
                  "reduce": {
                    "reducer": "sum"
                  }
                }
              },
              {
                "id": "calculateField",
                "options": {
                  "alias": "Electricity - COST - TOTAL [Consumption:Octograph; Cost:API]",
                  "binary": {
                    "left": "Electricity - Consumption Cost [Consumption=Octograph; Unit Charge=API]",
                    "reducer": "sum",
                    "right": "Electricity - Charge - Standing [API->VMIMPORT]"
                  },
                  "mode": "binary",
                  "reduce": {
                    "reducer": "sum"
                  }
                }
              },
              {
                "id": "calculateField",
                "options": {
                  "alias": "Electricity - COST - TOTAL   [Consumption=ShellyEM; Cost=API]",
                  "binary": {
                    "left": "Electricity - Consumption Cost [Consumption=ShellyEM; Unit Charge=API]",
                    "reducer": "sum",
                    "right": "Electricity - Charge - Standing [API->VMIMPORT]"
                  },
                  "mode": "binary",
                  "reduce": {
                    "reducer": "sum"
                  }
                }
              },
              {
                "disabled": true,
                "id": "calculateField",
                "options": {
                  "alias": "USE QUERY INSTEAD SINCE CAN'T USE THIS CALC IN OTHER CALC TRANSFORM - KEEP TO COMPARE VALUES | Electricity - Daily Usage Cost [Consumption=HA; Unit Charge=HA]",
                  "binary": {
                    "left": "Electricity - Consumption - Daily (kWh) [HA]",
                    "operator": "*",
                    "reducer": "sum",
                    "right": "Electricity - Charge - Unit (per kWh) [HA]"
                  },
                  "mode": "binary",
                  "reduce": {
                    "reducer": "sum"
                  },
                  "replaceFields": false
                }
              },
              {
                "disabled": true,
                "id": "calculateField",
                "options": {
                  "alias": "USE QUERY INSTEAD SINCE CAN'T USE THIS CALC IN OTHER CALC TRANSFORM - KEEP TO COMPARE VALUES | Electricity - Usage Cost [Consumption=Octograph; Unit Charge=API]",
                  "binary": {
                    "left": "Gas - Consumption (kWh) [Octograph] (from volumetric/calorific values)",
                    "operator": "*",
                    "reducer": "sum",
                    "right": "Electricity - Charge - Unit (per kWh) [API->VMIMPORT]"
                  },
                  "mode": "binary",
                  "reduce": {
                    "reducer": "sum"
                  }
                }
              },
              {
                "disabled": true,
                "id": "calculateField",
                "options": {
                  "alias": "USE QUERY INSTEAD SINCE CAN'T USE THIS CALC IN OTHER CALC TRANSFORM - KEEP TO COMPARE VALUES | Electricity - Usage Cost [Consumption=Shelly; Unit Charge=API]",
                  "binary": {
                    "left": "Electricity - Consumption (kWh) [ShellyEM MQTT->VMA]",
                    "operator": "*",
                    "reducer": "sum",
                    "right": "Electricity - Charge - Unit (per kWh) [API->VMIMPORT]"
                  },
                  "mode": "binary",
                  "reduce": {
                    "include": [
                      "Electricity - ShellyEM Electricity Consumption (kWh) [MQTT->VMA]"
                    ],
                    "reducer": "sum"
                  }
                }
              },
              {
                "id": "calculateField",
                "options": {
                  "alias": "Gas - COST - TOTAL - Daily [HA]",
                  "binary": {
                    "left": "Gas - Consumption Cost - Daily [Consumption=HA; Unit Charge=HA]",
                    "reducer": "sum",
                    "right": "Gas - Charge - Standing [HA]"
                  },
                  "mode": "binary",
                  "reduce": {
                    "reducer": "sum"
                  }
                }
              },
              {
                "id": "calculateField",
                "options": {
                  "alias": "Gas - COST - TOTAL [Consumption:Octograph; Cost:API]",
                  "binary": {
                    "left": "Gas - Consumption Cost [Consumption=Octograph; Unit Charge=API]",
                    "reducer": "sum",
                    "right": "Gas - Charge - Standing [API->VMIMPORT]"
                  },
                  "mode": "binary",
                  "reduce": {
                    "reducer": "sum"
                  }
                }
              },
              {
                "disabled": true,
                "id": "calculateField",
                "options": {
                  "alias": "USE QUERY INSTEAD SINCE CAN'T USE THIS CALC IN OTHER CALC TRANSFORM - KEEP TO COMPARE VALUES | Gas - Daily Usage Cost [Consumption=HA; Unit Charge=HA]",
                  "binary": {
                    "left": "Gas - Consumption - Daily (kWh) [HA]",
                    "operator": "*",
                    "reducer": "sum",
                    "right": "Gas - Charge - Unit (per kWh) [HA]"
                  },
                  "mode": "binary",
                  "reduce": {
                    "reducer": "sum"
                  }
                }
              },
              {
                "disabled": true,
                "id": "calculateField",
                "options": {
                  "alias": "USE QUERY INSTEAD SINCE CAN'T USE THIS CALC IN OTHER CALC TRANSFORM - KEEP TO COMPARE VALUES | Gas - Usage Cost [Consumption=Octograph; Unit Charge=API]",
                  "binary": {
                    "left": "Gas - Consumption (kWh) [Octograph] (from volumetric/calorific values)",
                    "operator": "*",
                    "reducer": "sum",
                    "right": "Gas - Charge - Unit (per kWh) [API->VMIMPORT]"
                  },
                  "mode": "binary",
                  "reduce": {
                    "reducer": "sum"
                  },
                  "replaceFields": false
                }
              }
            ],
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "datasource",
              "uid": "-- Mixed --"
            },
            "description": "Octograph Gas Consumption may be slightly off if calorific value/volumetric correction is not 100% accurate.",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "decimals": 3,
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                }
              },
              "overrides": [
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/.*Standing Charge.*/"
                  },
                  "properties": [
                    {
                      "id": "unit",
                      "value": "currencyGBP"
                    },
                    {
                      "id": "decimals",
                      "value": 4
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/.*Cost.*/"
                  },
                  "properties": [
                    {
                      "id": "unit",
                      "value": "currencyGBP"
                    },
                    {
                      "id": "decimals",
                      "value": 4
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/.*\\(kWh\\).*/"
                  },
                  "properties": [
                    {
                      "id": "unit",
                      "value": "kwatth"
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/.*m³.*/"
                  },
                  "properties": [
                    {
                      "id": "unit",
                      "value": "m³"
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/.*Days.*/"
                  },
                  "properties": [
                    {
                      "id": "decimals",
                      "value": 0
                    }
                  ]
                }
              ]
            },
            "gridPos": {
              "h": 11,
              "w": 24,
              "x": 0,
              "y": 31
            },
            "id": 7,
            "options": {
              "colorMode": "value",
              "graphMode": "area",
              "justifyMode": "auto",
              "orientation": "auto",
              "percentChangeColorMode": "standard",
              "reduceOptions": {
                "calcs": [
                  "sum"
                ],
                "fields": "",
                "values": false
              },
              "showPercentChange": false,
              "text": {
                "titleSize": 15
              },
              "textMode": "auto",
              "wideLayout": true
            },
            "pluginVersion": "11.2.0",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "code",
                "expr": "present_over_time(octopus_energy_standingcharge_electricity_pence[1d:30m])",
                "hide": false,
                "interval": "1d",
                "legendFormat": "Days",
                "range": true,
                "refId": "Days"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "disableTextWrap": false,
                "editorMode": "code",
                "expr": "avg_over_time(ha_sensor_monetary_gbp{entity=~\"sensor.octopus_energy_electricity_.*_current_standing_charge\"}[1d])",
                "fullMetaSearch": false,
                "hide": false,
                "includeNullMetadata": true,
                "instant": false,
                "interval": "1d",
                "legendFormat": "Electricity - Standing Charge [HA]",
                "range": true,
                "refId": "Electricity - Standing Charge [HA]",
                "useBackend": false
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "disableTextWrap": false,
                "editorMode": "code",
                "expr": "avg_over_time(ha_sensor_monetary_gbp{entity=~\"sensor.octopus_energy_gas_.*_current_standing_charge\"}[1d])",
                "fullMetaSearch": false,
                "hide": false,
                "includeNullMetadata": true,
                "instant": false,
                "interval": "1d",
                "legendFormat": "Gas - Standing Charge [HA]",
                "range": true,
                "refId": "Gas - Standing Charge [HA]",
                "useBackend": false
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "disableTextWrap": false,
                "editorMode": "code",
                "expr": "avg_over_time(ha_sensor_monetary_gbp_per_kwh{entity=~\"sensor.octopus_energy_electricity_.*_current_rate\"}[1d])",
                "fullMetaSearch": false,
                "hide": true,
                "includeNullMetadata": true,
                "instant": false,
                "interval": "1d",
                "legendFormat": "Electricity - Unit Cost (per kWh) [HA]",
                "range": true,
                "refId": "Electricity - Unit Cost (per kWh) [HA]",
                "useBackend": false
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "disableTextWrap": false,
                "editorMode": "code",
                "expr": "avg_over_time(ha_sensor_monetary_gbp_per_kwh{entity=~\"sensor.octopus_energy_gas_.*_current_rate\"}[1d])",
                "fullMetaSearch": false,
                "hide": true,
                "includeNullMetadata": true,
                "instant": false,
                "interval": "1d",
                "legendFormat": "Gas - Unit Cost (per kWh) [HA]",
                "range": true,
                "refId": "Gas - Unit Cost (per kWh) [HA]",
                "useBackend": false
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "disableTextWrap": false,
                "editorMode": "code",
                "expr": "ha_sensor_energy_kwh{entity=~\"sensor.octopus_energy_electricity_.*_previous_accumulative_consumption\"} offset -24h",
                "fullMetaSearch": false,
                "hide": false,
                "includeNullMetadata": true,
                "instant": false,
                "interval": "1d",
                "legendFormat": "Electricity - Consumption (kWh) [HA]",
                "range": true,
                "refId": "Electricity - Consumption (kWh) [HA]",
                "useBackend": false
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "disableTextWrap": false,
                "editorMode": "code",
                "expr": "ha_sensor_energy_kwh{entity=~\"sensor.octopus_energy_gas_.*_previous_accumulative_consumption_kwh\"} offset -24h",
                "fullMetaSearch": false,
                "hide": true,
                "includeNullMetadata": true,
                "instant": false,
                "interval": "1d",
                "legendFormat": "Gas - Consumption (kWh) [HA]",
                "range": true,
                "refId": "Gas - Consumption (kWh) [HA]",
                "useBackend": false
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "disableTextWrap": false,
                "editorMode": "code",
                "expr": "ha_sensor_gas_mu0xb3{entity=~\"sensor.octopus_energy_gas_.*_previous_accumulative_consumption\"} offset -24h",
                "fullMetaSearch": false,
                "hide": true,
                "includeNullMetadata": true,
                "instant": false,
                "interval": "1d",
                "legendFormat": "Gas - Consumption (m³) [HA]",
                "range": true,
                "refId": "Gas - Consumption (m³) [HA]",
                "useBackend": false
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "code",
                "exemplar": false,
                "expr": "sum_over_time(electricity_consumption[$interval_consumption:30m])",
                "hide": false,
                "instant": false,
                "interval": "$interval_consumption",
                "legendFormat": "Electricity - Consumption (kWh) [Octograph]",
                "range": true,
                "refId": "Electricity - Consumption (kWh) [Octograph]"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "code",
                "exemplar": false,
                "expr": "sum_over_time(gas_consumption[$interval_consumption:30m])",
                "hide": true,
                "instant": false,
                "interval": "$interval_consumption",
                "legendFormat": "Gas - Consumption (m³) [Octograph]",
                "range": true,
                "refId": "Gas - Consumption (m³) [Octograph]"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "code",
                "exemplar": false,
                "expr": "sum_over_time(gas_consumption[$interval_consumption:30m]) * $gas_cal_value * $gas_vol_correction / 3.6",
                "hide": true,
                "instant": false,
                "interval": "$interval_consumption",
                "legendFormat": "Gas - Consumption (kWh) [Octograph] - from volumetric/calorific values",
                "range": true,
                "refId": "Gas - Consumption (kWh) [Octograph] - from volumetric/calorific values"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "code",
                "expr": "increase(shellyem_0_total[$__rate_interval])/1000",
                "hide": false,
                "interval": "$interval_consumption",
                "legendFormat": "Electricity - ShellyEM Electricity Consumption (kWh) [MQTT->VMA]",
                "range": true,
                "refId": "Electricity - ShellyEM Electricity Consumption (kWh) [MQTT->VMA]"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "code",
                "expr": "increase(interpolate(shellyem_0_total)[$__rate_interval])/1000",
                "hide": false,
                "interval": "$interval_consumption",
                "legendFormat": "Electricity - ShellyEM Electricity Consumption (kWh) [MQTT->VMA] INTERPOLATED",
                "range": true,
                "refId": "Electricity - ShellyEM Electricity Consumption (kWh) [MQTT->VMA] INTERPOLATED"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "disableTextWrap": false,
                "editorMode": "code",
                "expr": "avg_over_time(octopus_energy_standingcharge_electricity_pence[1d:12h] / 100)",
                "fullMetaSearch": false,
                "hide": false,
                "includeNullMetadata": true,
                "instant": false,
                "interval": "1d",
                "legendFormat": "Electricity - Standing Charge [API->VMIMPORT]",
                "range": true,
                "refId": "Electricity - Standing Charge [API->VMIMPORT]",
                "useBackend": false
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "disableTextWrap": false,
                "editorMode": "code",
                "expr": "avg_over_time(octopus_energy_standingcharge_gas_pence[1d:12h] / 100)",
                "fullMetaSearch": false,
                "hide": false,
                "includeNullMetadata": true,
                "instant": false,
                "interval": "1d",
                "legendFormat": "Gas - Standing Charge [API->VMIMPORT]",
                "range": true,
                "refId": "Gas - Standing Charge [API->VMIMPORT]",
                "useBackend": false
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "disableTextWrap": false,
                "editorMode": "code",
                "expr": "avg_over_time(octopus_energy_unitrate_electricity_pence[1d:12h] / 100)",
                "fullMetaSearch": false,
                "hide": true,
                "includeNullMetadata": true,
                "instant": false,
                "interval": "1d",
                "legendFormat": "Electricity - Unit Cost (per kWh) [API->VMIMPORT]",
                "range": true,
                "refId": "Electricity - Unit Cost (per kWh) [API->VMIMPORT]",
                "useBackend": false
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "disableTextWrap": false,
                "editorMode": "code",
                "expr": "avg_over_time(octopus_energy_unitrate_gas_pence[1d:12h] / 100)",
                "fullMetaSearch": false,
                "hide": true,
                "includeNullMetadata": true,
                "instant": false,
                "interval": "1d",
                "legendFormat": "Gas - Unit Cost (per kWh) [API->VMIMPORT]",
                "range": true,
                "refId": "Gas - Unit Cost (per kWh) [API->VMIMPORT]",
                "useBackend": false
              }
            ],
            "timeShift": "1d/d",
            "title": "All Energy Metrics - NEED TO UPDATE ONCE DATASET ESTABLISHED",
            "transformations": [
              {
                "disabled": true,
                "id": "calculateField",
                "options": {
                  "alias": "Gas - Daily Usage Cost [Consumption=HA; Unit Charge=HA]",
                  "binary": {
                    "left": "Gas - Consumption (kWh) [HA]",
                    "operator": "*",
                    "reducer": "sum",
                    "right": "Gas - Unit Cost (per kWh) [HA]"
                  },
                  "mode": "binary",
                  "reduce": {
                    "reducer": "sum"
                  }
                }
              },
              {
                "disabled": true,
                "id": "calculateField",
                "options": {
                  "alias": "Gas - Daily Total Cost [Standing=HA; Usage=HA Calc]",
                  "mode": "reduceRow",
                  "reduce": {
                    "include": [
                      "Gas - Daily Usage Cost [Consumption=HA; Unit Charge=HA]",
                      "Gas - Standing Charge [HA]"
                    ],
                    "reducer": "sum"
                  }
                }
              },
              {
                "disabled": true,
                "id": "calculateField",
                "options": {
                  "alias": "Electricity - Daily Usage Cost [Consumption=HA; Unit Charge=HA]",
                  "binary": {
                    "left": "Electricity - Consumption (kWh) [HA]",
                    "operator": "*",
                    "reducer": "sum",
                    "right": "Electricity - Unit Cost (per kWh) [HA]"
                  },
                  "mode": "binary",
                  "reduce": {
                    "reducer": "sum"
                  }
                }
              },
              {
                "disabled": true,
                "id": "calculateField",
                "options": {
                  "alias": "Electricity - Daily Total Cost [Standing=HA; Usage=HA Calc]",
                  "mode": "reduceRow",
                  "reduce": {
                    "include": [
                      "Electricity - Daily Usage Cost [Consumption=HA; Unit Charge=HA]",
                      "Electricity - Standing Charge [HA]"
                    ],
                    "reducer": "sum"
                  }
                }
              },
              {
                "disabled": true,
                "id": "calculateField",
                "options": {
                  "alias": "Electricity - Usage Cost [Consumption=Shelly; Unit Charge=API]",
                  "binary": {
                    "left": "Electricity - ShellyEM Electricity Consumption (kWh) [MQTT->VMA]",
                    "operator": "*",
                    "reducer": "sum",
                    "right": "Electricity - Unit Cost (per kWh) [API->VMIMPORT]"
                  },
                  "mode": "binary",
                  "reduce": {
                    "include": [
                      "Electricity - ShellyEM Electricity Consumption (kWh) [MQTT->VMA]"
                    ],
                    "reducer": "sum"
                  }
                }
              },
              {
                "disabled": true,
                "id": "calculateField",
                "options": {
                  "alias": "Electricity - Usage Cost [Consumption=Octograph; Unit Charge=API]",
                  "binary": {
                    "left": "Electricity - Consumption (kWh) [Octograph]",
                    "operator": "*",
                    "reducer": "sum",
                    "right": "Electricity - Unit Cost (per kWh) [API->VMIMPORT]"
                  },
                  "mode": "binary",
                  "reduce": {
                    "reducer": "sum"
                  }
                }
              },
              {
                "disabled": true,
                "id": "calculateField",
                "options": {
                  "alias": "Gas - Usage Cost [Consumption=Octograph; Unit Charge=API]",
                  "binary": {
                    "left": "Gas - Consumption (kWh) [Octograph] - from volumetric/calorific values",
                    "operator": "*",
                    "reducer": "sum",
                    "right": "Gas - Unit Cost (per kWh) [API->VMIMPORT]"
                  },
                  "mode": "binary",
                  "reduce": {
                    "reducer": "sum"
                  },
                  "replaceFields": false
                }
              }
            ],
            "type": "stat"
          }
        ],
        "title": "Energy - All Metrics (for reference)",
        "type": "row"
      },
      {
        "collapsed": true,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 9
        },
        "id": 4,
        "panels": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "P4169E866C3094E38"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "max": 4000,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "dark-green",
                      "value": null
                    },
                    {
                      "color": "green",
                      "value": 500
                    },
                    {
                      "color": "semi-dark-yellow",
                      "value": 750
                    },
                    {
                      "color": "light-orange",
                      "value": 1000
                    },
                    {
                      "color": "dark-orange",
                      "value": 1250
                    },
                    {
                      "color": "light-red",
                      "value": 1500
                    },
                    {
                      "color": "dark-red",
                      "value": 2000
                    }
                  ]
                },
                "unit": "watt"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 7,
              "w": 4,
              "x": 0,
              "y": 10
            },
            "id": 17,
            "options": {
              "minVizHeight": 75,
              "minVizWidth": 75,
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "last"
                ],
                "fields": "",
                "values": false
              },
              "showThresholdLabels": false,
              "showThresholdMarkers": true,
              "sizing": "auto"
            },
            "pluginVersion": "11.2.0",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "code",
                "expr": "shellyem_0_power",
                "instant": false,
                "legendFormat": "__auto",
                "range": true,
                "refId": "A"
              }
            ],
            "title": "Power Now [ShellyEM]",
            "type": "gauge"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "P4169E866C3094E38"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "continuous-YlRd"
                },
                "custom": {
                  "axisBorderShow": false,
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "barWidthFactor": 0.6,
                  "drawStyle": "bars",
                  "fillOpacity": 80,
                  "gradientMode": "hue",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "insertNulls": false,
                  "lineInterpolation": "stepBefore",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "kwatth"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 12,
              "y": 10
            },
            "id": 16,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "single",
                "sort": "none"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "code",
                "expr": "increase(shellyem_0_total[$__rate_interval])/1000",
                "instant": false,
                "interval": "1d",
                "legendFormat": "Electricity - ShellyEM Electricity Consumption (kWh) [MQTT->VMA]",
                "range": true,
                "refId": "Electricity - ShellyEM Electricity Consumption (kWh) [MQTT->VMA]"
              }
            ],
            "title": "Energy By Day (Full Time Range) [ShellyEM]",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "P4169E866C3094E38"
            },
            "description": "",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "kwatth"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 7,
              "w": 3,
              "x": 0,
              "y": 17
            },
            "id": 18,
            "options": {
              "colorMode": "value",
              "graphMode": "area",
              "justifyMode": "auto",
              "orientation": "horizontal",
              "percentChangeColorMode": "standard",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "showPercentChange": false,
              "text": {
                "titleSize": 18
              },
              "textMode": "value",
              "wideLayout": true
            },
            "pluginVersion": "11.2.0",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "code",
                "expr": "sum(increase(shellyem_0_total[$__interval]))",
                "instant": false,
                "legendFormat": "ShellyEM",
                "range": true,
                "refId": "Electricity - ShellyEM Electricity Consumption (kWh) [MQTT->VMA]"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "code",
                "expr": "sum_over_time(electricity_consumption[$__interval:30m])",
                "hide": true,
                "instant": false,
                "legendFormat": "Octograph",
                "range": true,
                "refId": "Electricity - Consumption (kWh) [Octograph]"
              }
            ],
            "title": "Consumption Over Time Range [ShellyEM]",
            "type": "stat"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "P4169E866C3094E38"
            },
            "description": "",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "currencyGBP"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 7,
              "w": 3,
              "x": 3,
              "y": 17
            },
            "id": 19,
            "options": {
              "colorMode": "value",
              "graphMode": "area",
              "justifyMode": "auto",
              "orientation": "horizontal",
              "percentChangeColorMode": "standard",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "showPercentChange": false,
              "text": {
                "titleSize": 18
              },
              "textMode": "value",
              "wideLayout": true
            },
            "pluginVersion": "11.2.0",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "code",
                "expr": "sum(increase(shellyem_0_total[$__interval]))",
                "instant": false,
                "legendFormat": "ShellyEM",
                "range": true,
                "refId": "Electricity - ShellyEM Electricity Consumption (kWh) [MQTT->VMA]"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "code",
                "expr": "sum_over_time(electricity_consumption[$__interval:30m])",
                "hide": true,
                "instant": false,
                "legendFormat": "Octograph",
                "range": true,
                "refId": "Electricity - Consumption (kWh) [Octograph]"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "code",
                "expr": "avg_over_time(octopus_energy_unitrate_electricity_pence[1d:12h] / 100)",
                "hide": false,
                "instant": false,
                "legendFormat": "Electricity - Unit Cost (per kWh) [API->VMIMPORT]",
                "range": true,
                "refId": "Electricity - Unit Cost (per kWh) [API->VMIMPORT]"
              }
            ],
            "title": "Total Unit Cost (Full Time Range) {ShellyEM]",
            "transformations": [
              {
                "id": "calculateField",
                "options": {
                  "binary": {
                    "left": "ShellyEM",
                    "operator": "*",
                    "reducer": "sum",
                    "right": "Electricity - Unit Cost (per kWh) [API->VMIMPORT]"
                  },
                  "mode": "binary",
                  "reduce": {
                    "include": [],
                    "reducer": "sum"
                  },
                  "replaceFields": true
                }
              }
            ],
            "type": "stat"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "P4169E866C3094E38"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisBorderShow": false,
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": -1,
                  "barWidthFactor": 0.6,
                  "drawStyle": "bars",
                  "fillOpacity": 80,
                  "gradientMode": "hue",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "insertNulls": false,
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "kwatth"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 12,
              "y": 18
            },
            "id": 13,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "single",
                "sort": "none"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "code",
                "expr": "sum_over_time(electricity_consumption[$interval_consumption:30m])",
                "instant": false,
                "interval": "$interval_consumption",
                "legendFormat": "Electricity - Consumption (kWh) [Octograph]",
                "range": true,
                "refId": "Electricity - Consumption (kWh) [Octograph]"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "code",
                "expr": "increase(interpolate(shellyem_0_total)[$__rate_interval])/1000",
                "hide": false,
                "instant": false,
                "interval": "$interval_consumption",
                "legendFormat": "Electricity - ShellyEM Electricity Consumption (kWh) [MQTT->VMA] INTERPOLATED",
                "range": true,
                "refId": "Electricity - ShellyEM Electricity Consumption (kWh) [MQTT->VMA] INTERPOLATED"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "code",
                "expr": "increase(shellyem_0_total[$__rate_interval])/1000",
                "hide": false,
                "instant": false,
                "interval": "$interval_consumption",
                "legendFormat": "Electricity - ShellyEM Electricity Consumption (kWh) [MQTT->VMA]",
                "range": true,
                "refId": "A"
              }
            ],
            "timeShift": "1d/d",
            "title": "Electricity Consumption - Octograph vs ShellyEM",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "P4169E866C3094E38"
            },
            "description": "",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "kwatth"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 7,
              "w": 3,
              "x": 0,
              "y": 24
            },
            "id": 20,
            "options": {
              "colorMode": "value",
              "graphMode": "area",
              "justifyMode": "auto",
              "orientation": "horizontal",
              "percentChangeColorMode": "standard",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "showPercentChange": false,
              "text": {
                "titleSize": 18
              },
              "textMode": "value",
              "wideLayout": true
            },
            "pluginVersion": "11.2.0",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "code",
                "expr": "sum(increase(shellyem_0_total[$__interval]))",
                "hide": true,
                "instant": false,
                "legendFormat": "ShellyEM",
                "range": true,
                "refId": "Electricity - ShellyEM Electricity Consumption (kWh) [MQTT->VMA]"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "code",
                "expr": "sum_over_time(electricity_consumption[$__interval:30m])",
                "hide": false,
                "instant": false,
                "legendFormat": "Octograph",
                "range": true,
                "refId": "Electricity - Consumption (kWh) [Octograph]"
              }
            ],
            "title": "Consumption Over Time Range [Octograph]",
            "type": "stat"
          },
          {
            "datasource": {
              "type": "datasource",
              "uid": "-- Mixed --"
            },
            "description": "",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "kwatth"
              },
              "overrides": [
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/.*Cost.*/"
                  },
                  "properties": [
                    {
                      "id": "unit",
                      "value": "currencyGBP"
                    }
                  ]
                }
              ]
            },
            "gridPos": {
              "h": 7,
              "w": 3,
              "x": 3,
              "y": 24
            },
            "id": 21,
            "options": {
              "colorMode": "value",
              "graphMode": "area",
              "justifyMode": "auto",
              "orientation": "auto",
              "percentChangeColorMode": "standard",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "showPercentChange": false,
              "text": {
                "titleSize": 18
              },
              "textMode": "value_and_name",
              "wideLayout": true
            },
            "pluginVersion": "11.2.0",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "code",
                "expr": "sum(increase(shellyem_0_total[$__interval]))",
                "hide": true,
                "instant": false,
                "legendFormat": "ShellyEM",
                "range": true,
                "refId": "Electricity - ShellyEM Electricity Consumption (kWh) [MQTT->VMA]"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "code",
                "exemplar": false,
                "expr": "sum_over_time(electricity_consumption[$interval_consumption:30m])",
                "format": "time_series",
                "hide": false,
                "instant": false,
                "interval": "30m",
                "legendFormat": "Octograph",
                "range": true,
                "refId": "Electricity - Consumption (kWh) [Octograph]"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "disableTextWrap": false,
                "editorMode": "builder",
                "expr": "avg_over_time(octopus_energy_unitrate_electricity_pence[$__interval]) / 100",
                "fullMetaSearch": false,
                "hide": false,
                "includeNullMetadata": true,
                "instant": false,
                "legendFormat": "Electricity - Unit Cost (per kWh) [API->VMIMPORT]",
                "range": true,
                "refId": "Electricity - Unit Cost (per kWh) [API->VMIMPORT]",
                "useBackend": false
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "disableTextWrap": false,
                "editorMode": "code",
                "exemplar": false,
                "expr": "electricity_consumption",
                "format": "time_series",
                "fullMetaSearch": false,
                "hide": false,
                "includeNullMetadata": true,
                "instant": false,
                "interval": "30m",
                "legendFormat": "Octograph2",
                "range": true,
                "refId": "A",
                "useBackend": false
              }
            ],
            "title": "Total Unit Cost (Full Time Range) {ShellyEM]",
            "transformations": [
              {
                "filter": {
                  "id": "byRefId",
                  "options": "A"
                },
                "id": "reduce",
                "options": {
                  "includeTimeField": false,
                  "labelsToFields": true,
                  "mode": "seriesToRows",
                  "reducers": [
                    "sum"
                  ]
                }
              },
              {
                "disabled": true,
                "id": "calculateField",
                "options": {
                  "alias": "Total Cost",
                  "binary": {
                    "left": "Electricity - Unit Cost (per kWh) [API->VMIMPORT]",
                    "operator": "*",
                    "reducer": "sum",
                    "right": "Electricity - Unit Cost (per kWh) [API->VMIMPORT]"
                  },
                  "mode": "reduceRow",
                  "reduce": {
                    "include": [],
                    "reducer": "sum"
                  },
                  "replaceFields": false
                }
              },
              {
                "disabled": true,
                "id": "calculateField",
                "options": {
                  "binary": {
                    "left": "Octograph",
                    "reducer": "sum",
                    "right": "2"
                  },
                  "mode": "binary",
                  "reduce": {
                    "reducer": "sum"
                  }
                }
              },
              {
                "disabled": true,
                "id": "reduce",
                "options": {
                  "includeTimeField": false,
                  "mode": "seriesToRows",
                  "reducers": [
                    "max"
                  ]
                }
              }
            ],
            "type": "stat"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "P4169E866C3094E38"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "continuous-GrYlRd"
                },
                "custom": {
                  "axisBorderShow": false,
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "barWidthFactor": 0.6,
                  "drawStyle": "line",
                  "fillOpacity": 40,
                  "gradientMode": "scheme",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "insertNulls": false,
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "watt"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 12,
              "y": 26
            },
            "id": 9,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "single",
                "sort": "none"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "code",
                "expr": "shellyem_0_power",
                "instant": false,
                "legendFormat": "Power (ShellyEM)",
                "range": true,
                "refId": "A"
              }
            ],
            "timeFrom": "24h",
            "title": "Instantaneous Power (last 24h) [ShellyEM]",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "P4169E866C3094E38"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "continuous-YlRd"
                },
                "custom": {
                  "axisBorderShow": false,
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "barWidthFactor": 0.6,
                  "drawStyle": "bars",
                  "fillOpacity": 80,
                  "gradientMode": "hue",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "insertNulls": false,
                  "lineInterpolation": "stepBefore",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "kwatth"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 31
            },
            "id": 14,
            "options": {
              "legend": {
                "calcs": [
                  "lastNotNull",
                  "min",
                  "max",
                  "mean"
                ],
                "displayMode": "table",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "single",
                "sort": "none"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "code",
                "expr": "increase(shellyem_0_total[$__rate_interval])/1000",
                "instant": false,
                "interval": "1h",
                "legendFormat": "Electricity - ShellyEM Electricity Consumption (kWh) [MQTT->VMA]",
                "range": true,
                "refId": "Electricity - ShellyEM Electricity Consumption (kWh) [MQTT->VMA]"
              }
            ],
            "timeFrom": "24h",
            "title": "Energy By Hour (last 24h) [ShellyEM]",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "P4169E866C3094E38"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "continuous-BlYlRd"
                },
                "custom": {
                  "axisBorderShow": false,
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "barWidthFactor": 0.6,
                  "drawStyle": "line",
                  "fillOpacity": 40,
                  "gradientMode": "scheme",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "insertNulls": false,
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "amp"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 12,
              "y": 34
            },
            "id": 11,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "single",
                "sort": "none"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "code",
                "expr": "shellyem_0_power / shellyem_0_voltage",
                "instant": false,
                "legendFormat": "Current (ShellyEM)",
                "range": true,
                "refId": "A"
              }
            ],
            "timeFrom": "24h",
            "title": "Instantaneous Current (last 24h) [ShellyEM]",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "P4169E866C3094E38"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "continuous-YlRd"
                },
                "custom": {
                  "axisBorderShow": false,
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "barWidthFactor": 0.6,
                  "drawStyle": "bars",
                  "fillOpacity": 80,
                  "gradientMode": "hue",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "insertNulls": false,
                  "lineInterpolation": "stepBefore",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "kwatth"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 39
            },
            "id": 15,
            "options": {
              "legend": {
                "calcs": [
                  "lastNotNull",
                  "min",
                  "max",
                  "mean"
                ],
                "displayMode": "table",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "single",
                "sort": "none"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "code",
                "expr": "increase(shellyem_0_total[$__rate_interval])/1000",
                "instant": false,
                "interval": "1h",
                "legendFormat": "Electricity - ShellyEM Electricity Consumption (kWh) [MQTT->VMA]",
                "range": true,
                "refId": "Electricity - ShellyEM Electricity Consumption (kWh) [MQTT->VMA]"
              }
            ],
            "title": "Energy By Hour (Full Time Range) [ShellyEM]",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "P4169E866C3094E38"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "bars",
                  "fillOpacity": 80,
                  "gradientMode": "hue",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "insertNulls": false,
                  "lineInterpolation": "stepBefore",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "#EAB839",
                      "value": 12
                    },
                    {
                      "color": "red",
                      "value": 20
                    }
                  ]
                },
                "unit": "kwatth"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 47
            },
            "id": 128,
            "options": {
              "legend": {
                "calcs": [
                  "lastNotNull",
                  "min",
                  "max",
                  "mean"
                ],
                "displayMode": "table",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "single",
                "sort": "none"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "code",
                "expr": "increase(shellyem_0_total[$__rate_interval])/1000",
                "instant": false,
                "interval": "1d",
                "legendFormat": "Electricity - ShellyEM Electricity Consumption (kWh) [MQTT->VMA]",
                "range": true,
                "refId": "Electricity - ShellyEM Electricity Consumption (kWh) [MQTT->VMA]"
              }
            ],
            "timeShift": "1d",
            "title": "Energy By Day (Full Time Range) [ShellyEM]",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "P4169E866C3094E38"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "insertNulls": false,
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                }
              },
              "overrides": []
            },
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 55
            },
            "id": 12,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "single",
                "sort": "none"
              }
            },
            "title": "Energy Used & Cost - UPDATE WHEN WEHAVE DATASET",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "P4169E866C3094E38"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "continuous-GrYlRd"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 40,
                  "gradientMode": "scheme",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "insertNulls": false,
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "watt"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 63
            },
            "id": 8,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "single",
                "sort": "none"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "code",
                "expr": "shellyem_0_power",
                "instant": false,
                "legendFormat": "Power (ShellyEM)",
                "range": true,
                "refId": "A"
              }
            ],
            "title": "Instantaneous Power (Full Time Range) [ShellyEM]",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "P4169E866C3094E38"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "continuous-BlYlRd"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 40,
                  "gradientMode": "scheme",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "insertNulls": false,
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "amp"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 71
            },
            "id": 10,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "single",
                "sort": "none"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "code",
                "expr": "shellyem_0_power / shellyem_0_voltage",
                "instant": false,
                "legendFormat": "Current (ShellyEM)",
                "range": true,
                "refId": "A"
              }
            ],
            "title": "Instantaneous Current (Full Time Range) [ShellyEM]",
            "type": "timeseries"
          }
        ],
        "title": "Electricity",
        "type": "row"
      },
      {
        "collapsed": true,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 10
        },
        "id": 22,
        "panels": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "P4169E866C3094E38"
            },
            "gridPos": {
              "h": 5,
              "w": 24,
              "x": 0,
              "y": 35
            },
            "id": 23,
            "options": {
              "code": {
                "language": "plaintext",
                "showLineNumbers": false,
                "showMiniMap": false
              },
              "content": "# Create gas versions of electricity metrics\n\nAns see old Grafana visualisations",
              "mode": "markdown"
            },
            "pluginVersion": "10.1.2",
            "title": "Panel Title",
            "type": "text"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "W_4Ss6Dnk"
            },
            "gridPos": {
              "h": 7,
              "w": 3,
              "x": 0,
              "y": 40
            },
            "id": 89,
            "options": {
              "code": {
                "language": "plaintext",
                "showLineNumbers": false,
                "showMiniMap": false
              },
              "content": "<table style=\"border-collapse: collapse; width: 100%;\" border=\"1\">\n<tbody>\n<tr>\n<td style=\"width: 3.66975%; text-align: left;\" colspan=\"2\"><strong>Consumption in kWh</strong></td>\n</tr>\n<tr>\n<td style=\"width: 3.66975%; text-align: center;\">&nbsp;</td>\n<td style=\"width: 96.3303%;\">Meter Reading <em>(in m&sup3;)</em></td>\n</tr>\n<tr>\n<td style=\"width: 3.66975%; text-align: center;\">x</td>\n<td style=\"width: 96.3303%;\">Volumetric Correction<em> (pressure/temp)</em></td>\n</tr>\n<tr>\n<td style=\"width: 3.66975%; text-align: center;\">x</td>\n<td style=\"width: 96.3303%;\">Calorific Value <em>(energy in each m&sup3;)</em></td>\n</tr>\n<tr>\n<td style=\"width: 3.66975%; text-align: center;\">&divide;</td>\n<td style=\"width: 96.3303%;\">3.6 <em>(convert from joules)</em></td>\n</tr>\n</tbody>\n</table>",
              "mode": "html"
            },
            "pluginVersion": "10.1.2",
            "title": "Gas Calculations",
            "type": "text"
          }
        ],
        "title": "Gas",
        "type": "row"
      },
      {
        "collapsed": true,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 11
        },
        "id": 5,
        "panels": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "P4169E866C3094E38"
            },
            "fieldConfig": {
              "defaults": {
                "custom": {
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "scaleDistribution": {
                    "type": "linear"
                  }
                }
              },
              "overrides": []
            },
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 114
            },
            "id": 127,
            "options": {
              "calculate": false,
              "cellGap": 1,
              "color": {
                "exponent": 0.5,
                "fill": "dark-orange",
                "max": 1,
                "min": 0,
                "mode": "scheme",
                "reverse": false,
                "scale": "exponential",
                "scheme": "RdYlBu",
                "steps": 2
              },
              "exemplars": {
                "color": "orange"
              },
              "filterValues": {
                "le": 0
              },
              "legend": {
                "show": false
              },
              "rowsFrame": {
                "layout": "auto"
              },
              "tooltip": {
                "show": true,
                "yHistogram": false
              },
              "yAxis": {
                "axisPlacement": "left",
                "reverse": false
              }
            },
            "pluginVersion": "10.1.2",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "disableTextWrap": false,
                "editorMode": "code",
                "expr": "ha_binary_sensor_state{entity=~\".*_occupancy\", friendly_name=~\"$ha_camera_area.*\"}",
                "fullMetaSearch": false,
                "includeNullMetadata": true,
                "instant": false,
                "legendFormat": "{{friendly_name}}",
                "range": true,
                "refId": "Camera Occupancy - Front",
                "useBackend": false
              }
            ],
            "title": "Camera Detections - Filtered",
            "transformations": [
              {
                "id": "renameByRegex",
                "options": {
                  "regex": "(.*) occupancy",
                  "renamePattern": "$1"
                }
              }
            ],
            "type": "heatmap"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "P4169E866C3094E38"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "insertNulls": false,
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "percent"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 12,
              "y": 114
            },
            "id": 126,
            "options": {
              "legend": {
                "calcs": [
                  "lastNotNull"
                ],
                "displayMode": "table",
                "placement": "right",
                "showLegend": true
              },
              "tooltip": {
                "mode": "multi",
                "sort": "asc"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "code",
                "expr": "ha_sensor_temperature_celsius{entity=~\"$ha_entities\"}",
                "hide": true,
                "instant": false,
                "legendFormat": "{{friendly_name}}",
                "range": true,
                "refId": "A"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "code",
                "expr": "ha_sensor_humidity_percent{entity=~\"$ha_entities\"}",
                "hide": false,
                "instant": false,
                "legendFormat": "{{friendly_name}}",
                "range": true,
                "refId": "B"
              }
            ],
            "title": "HA Humidity",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "P4169E866C3094E38"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "max": 100,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "dark-red"
                    },
                    {
                      "color": "#EAB839",
                      "value": 20
                    },
                    {
                      "color": "dark-green",
                      "value": 50
                    }
                  ]
                },
                "unit": "percent"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 122
            },
            "id": 123,
            "options": {
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "showThresholdLabels": false,
              "showThresholdMarkers": true
            },
            "pluginVersion": "10.1.2",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "code",
                "expr": "ha_sensor_battery_percent{entity=~\"$ha_entities\"}",
                "instant": false,
                "legendFormat": "{{friendly_name}}",
                "range": true,
                "refId": "A"
              }
            ],
            "title": "HA Batteries",
            "type": "gauge"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "P4169E866C3094E38"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "insertNulls": false,
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "celsius"
              },
              "overrides": [
                {
                  "matcher": {
                    "id": "byFrameRefID",
                    "options": "B"
                  },
                  "properties": [
                    {
                      "id": "unit",
                      "value": "percent"
                    },
                    {
                      "id": "custom.drawStyle",
                      "value": "line"
                    },
                    {
                      "id": "custom.fillOpacity",
                      "value": 10
                    }
                  ]
                }
              ]
            },
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 12,
              "y": 122
            },
            "id": 124,
            "options": {
              "legend": {
                "calcs": [
                  "lastNotNull"
                ],
                "displayMode": "table",
                "placement": "right",
                "showLegend": true
              },
              "tooltip": {
                "mode": "multi",
                "sort": "asc"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "code",
                "expr": "ha_sensor_temperature_celsius{entity=~\"$ha_entities\"}",
                "instant": false,
                "legendFormat": "{{friendly_name}}",
                "range": true,
                "refId": "A"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "code",
                "expr": "ha_sensor_humidity_percent{entity=~\"$ha_entities\"}",
                "hide": true,
                "instant": false,
                "legendFormat": "{{friendly_name}}",
                "range": true,
                "refId": "B"
              }
            ],
            "title": "HA Temperature",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "P4169E866C3094E38"
            },
            "description": "",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "insertNulls": false,
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "watt"
              },
              "overrides": [
                {
                  "__systemRef": "hideSeriesFrom",
                  "matcher": {
                    "id": "byNames",
                    "options": {
                      "mode": "exclude",
                      "names": [
                        "50A power"
                      ],
                      "prefix": "All except:",
                      "readOnly": true
                    }
                  },
                  "properties": [
                    {
                      "id": "custom.hideFrom",
                      "value": {
                        "legend": false,
                        "tooltip": false,
                        "viz": true
                      }
                    }
                  ]
                }
              ]
            },
            "gridPos": {
              "h": 15,
              "w": 24,
              "x": 0,
              "y": 130
            },
            "id": 115,
            "options": {
              "legend": {
                "calcs": [
                  "lastNotNull",
                  "min",
                  "max",
                  "mean",
                  "sum"
                ],
                "displayMode": "table",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "single",
                "sort": "none"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "W_4Ss6Dnk"
                },
                "editorMode": "code",
                "expr": "ha_sensor_power_w {entity=~\"$ha_entities\"} !=0",
                "legendFormat": "{{friendly_name}}",
                "range": true,
                "refId": "A"
              }
            ],
            "title": "Home Assistant Power Metrics (Entity Filter)",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "P4169E866C3094E38"
            },
            "description": "",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "continuous-YlRd"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "bars",
                  "fillOpacity": 85,
                  "gradientMode": "hue",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "insertNulls": false,
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "kwatt"
              },
              "overrides": [
                {
                  "__systemRef": "hideSeriesFrom",
                  "matcher": {
                    "id": "byNames",
                    "options": {
                      "mode": "exclude",
                      "names": [
                        "50A energy"
                      ],
                      "prefix": "All except:",
                      "readOnly": true
                    }
                  },
                  "properties": [
                    {
                      "id": "custom.hideFrom",
                      "value": {
                        "legend": false,
                        "tooltip": false,
                        "viz": true
                      }
                    }
                  ]
                }
              ]
            },
            "gridPos": {
              "h": 15,
              "w": 24,
              "x": 0,
              "y": 145
            },
            "id": 118,
            "interval": "1h",
            "options": {
              "legend": {
                "calcs": [
                  "lastNotNull",
                  "min",
                  "max",
                  "mean",
                  "sum"
                ],
                "displayMode": "table",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "multi",
                "sort": "none"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "W_4Ss6Dnk"
                },
                "editorMode": "code",
                "expr": "increase(ha_sensor_energy_kwh{entity=~\"$ha_entities\"}[$__rate_interval]) != 0",
                "legendFormat": "{{friendly_name}}",
                "range": true,
                "refId": "A"
              }
            ],
            "title": "Home Assistant 'Energy' Entities (Entity Filter) - Per Hour (Full Time Range)",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "P4169E866C3094E38"
            },
            "description": "Metrics from MQTT -> VMAgent via Node Red flow\n\nEnergy metric is in Watt Minutes - divide by 60 to get Wh.",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "insertNulls": false,
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "dark-green"
                    },
                    {
                      "color": "green",
                      "value": 80
                    },
                    {
                      "color": "#EAB839",
                      "value": 90
                    },
                    {
                      "color": "dark-red",
                      "value": 100
                    }
                  ]
                },
                "unit": "watt"
              },
              "overrides": [
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/.*Consumption.*/"
                  },
                  "properties": [
                    {
                      "id": "unit",
                      "value": "watth"
                    },
                    {
                      "id": "custom.barAlignment",
                      "value": 0
                    },
                    {
                      "id": "custom.drawStyle",
                      "value": "bars"
                    },
                    {
                      "id": "custom.fillOpacity",
                      "value": 25
                    }
                  ]
                }
              ]
            },
            "gridPos": {
              "h": 11,
              "w": 24,
              "x": 0,
              "y": 160
            },
            "id": 122,
            "options": {
              "legend": {
                "calcs": [
                  "lastNotNull",
                  "min",
                  "max",
                  "mean"
                ],
                "displayMode": "table",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "multi",
                "sort": "none"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "W_4Ss6Dnk"
                },
                "editorMode": "code",
                "expr": "shelly1PM04_power",
                "legendFormat": "Power",
                "range": true,
                "refId": "Power"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "W_4Ss6Dnk"
                },
                "editorMode": "code",
                "expr": "sum_over_time(increase(shelly1PM04_energy)[$interval_consumption])/60",
                "hide": false,
                "interval": "$interval_consumption",
                "legendFormat": "Consumption (interval filter)",
                "range": true,
                "refId": "Consumption-interval"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "W_4Ss6Dnk"
                },
                "editorMode": "code",
                "expr": "sum_over_time(increase(shelly1PM04_energy)[1h])/60",
                "hide": false,
                "interval": "1h",
                "legendFormat": "Consumption (1h)",
                "range": true,
                "refId": "Consumption-1h"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "W_4Ss6Dnk"
                },
                "editorMode": "code",
                "expr": "sum_over_time(shelly1PM04_power[$__rate_interval])/(count_over_time(shelly1PM04_power[1m])*60)",
                "hide": true,
                "interval": "1h",
                "legendFormat": "Wh (1 hour)",
                "range": true,
                "refId": "Wh-1h"
              }
            ],
            "timeShift": "0h/h",
            "title": "Shelly (1PM #04) Power Monitor",
            "type": "timeseries"
          }
        ],
        "title": "Home Assistant - Interesting Entities",
        "type": "row"
      },
      {
        "collapsed": true,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 12
        },
        "id": 6,
        "panels": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "P4169E866C3094E38"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisBorderShow": false,
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "barWidthFactor": 0.6,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "insertNulls": false,
                  "lineInterpolation": "stepAfter",
                  "lineStyle": {
                    "fill": "solid"
                  },
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": true,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                }
              },
              "overrides": []
            },
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 13
            },
            "id": 109,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "single",
                "sort": "none"
              }
            },
            "pluginVersion": "9.0.6",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "builder",
                "expr": "layzspa_heater",
                "legendFormat": "Heater",
                "range": true,
                "refId": "A"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "builder",
                "expr": "layzspa_heating + 2",
                "hide": false,
                "legendFormat": "Active Heating",
                "range": true,
                "refId": "D"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "builder",
                "expr": "layzspa_filter + 4",
                "hide": false,
                "legendFormat": "Pump",
                "range": true,
                "refId": "C"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "builder",
                "expr": "layzspa_air + 6",
                "hide": false,
                "legendFormat": "Bubbles",
                "range": true,
                "refId": "B"
              }
            ],
            "title": "Spa Functions",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "datasource",
              "uid": "-- Mixed --"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisBorderShow": false,
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "barWidthFactor": 0.6,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "insertNulls": false,
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "kwatth"
              },
              "overrides": [
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": ".*Cost.*"
                  },
                  "properties": [
                    {
                      "id": "custom.axisPlacement",
                      "value": "right"
                    },
                    {
                      "id": "unit",
                      "value": "currencyGBP"
                    }
                  ]
                }
              ]
            },
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 12,
              "y": 13
            },
            "id": 111,
            "options": {
              "legend": {
                "calcs": [
                  "lastNotNull",
                  "min",
                  "max",
                  "mean",
                  "variance",
                  "sum"
                ],
                "displayMode": "table",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "single",
                "sort": "none"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "code",
                "expr": "remove_resets(layzspa_cost) / 100",
                "hide": true,
                "legendFormat": "Cost (est)",
                "range": true,
                "refId": "B"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "code",
                "expr": "avg_over_time(octopus_energy_unitrate_electricity_pence[1d:12h] / 100)",
                "hide": false,
                "legendFormat": "Unit Cost",
                "range": true,
                "refId": "D"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "code",
                "expr": "sum(increase(layzspa_kwh[$__rate_interval]))",
                "hide": false,
                "legendFormat": "kWh",
                "range": true,
                "refId": "C"
              }
            ],
            "title": "Spa KWH & Cost",
            "transformations": [
              {
                "id": "calculateField",
                "options": {
                  "alias": "Cost",
                  "binary": {
                    "left": "kWh",
                    "operator": "*",
                    "reducer": "sum",
                    "right": "Unit Cost"
                  },
                  "mode": "binary",
                  "reduce": {
                    "reducer": "sum"
                  },
                  "replaceFields": false
                }
              }
            ],
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "P4169E866C3094E38"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisBorderShow": false,
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "barWidthFactor": 0.6,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "insertNulls": false,
                  "lineInterpolation": "stepAfter",
                  "lineStyle": {
                    "fill": "solid"
                  },
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": true,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "decimals": 1,
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "celsius"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 21
            },
            "id": 113,
            "options": {
              "legend": {
                "calcs": [
                  "lastNotNull",
                  "min",
                  "max",
                  "mean"
                ],
                "displayMode": "table",
                "placement": "bottom",
                "showLegend": true
              },
              "tooltip": {
                "mode": "single",
                "sort": "none"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "builder",
                "expr": "layzspa_temp",
                "legendFormat": "Actual Temp",
                "range": true,
                "refId": "A"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "builder",
                "expr": "layzspa_target",
                "hide": false,
                "legendFormat": "Target Temp",
                "range": true,
                "refId": "B"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "builder",
                "expr": "ha_sensor_temperature_celsius{entity=\"sensor.openweathermap_temperature\"}",
                "hide": false,
                "legendFormat": "Air Temp",
                "range": true,
                "refId": "C"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "P4169E866C3094E38"
                },
                "editorMode": "code",
                "expr": "ha_input_number_state_celsius{entity=\"input_number.layzspa_min_temp\"}",
                "hide": false,
                "legendFormat": "Min Temp (Home Assistant)",
                "range": true,
                "refId": "D"
              }
            ],
            "title": "Spa Temperature",
            "type": "timeseries"
          }
        ],
        "title": "Lay-Z-Spa",
        "type": "row"
      }
    ],
    "refresh": "",
    "schemaVersion": 39,
    "tags": [],
    "templating": {
      "list": [
        {
          "auto": true,
          "auto_count": 30,
          "auto_min": "30m",
          "current": {
            "selected": true,
            "text": "1d",
            "value": "1d"
          },
          "description": "Interval over which to sum consumption metrics where they are broken down in a very granular way. e.g. Octograph, ShellyEM",
          "hide": 0,
          "label": "Consumption Sum Interval",
          "name": "interval_consumption",
          "options": [
            {
              "selected": false,
              "text": "auto",
              "value": "$__auto_interval_interval_consumption"
            },
            {
              "selected": false,
              "text": "30m",
              "value": "30m"
            },
            {
              "selected": false,
              "text": "1h",
              "value": "1h"
            },
            {
              "selected": false,
              "text": "2h",
              "value": "2h"
            },
            {
              "selected": false,
              "text": "3h",
              "value": "3h"
            },
            {
              "selected": false,
              "text": "4h",
              "value": "4h"
            },
            {
              "selected": false,
              "text": "6h",
              "value": "6h"
            },
            {
              "selected": false,
              "text": "12h",
              "value": "12h"
            },
            {
              "selected": true,
              "text": "1d",
              "value": "1d"
            },
            {
              "selected": false,
              "text": "2d",
              "value": "2d"
            },
            {
              "selected": false,
              "text": "7d",
              "value": "7d"
            },
            {
              "selected": false,
              "text": "14d",
              "value": "14d"
            },
            {
              "selected": false,
              "text": "30d",
              "value": "30d"
            }
          ],
          "query": "30m,1h,2h,3h,4h,6h,12h,1d,2d,7d,14d,30d",
          "queryValue": "",
          "refresh": 2,
          "skipUrlSync": false,
          "type": "interval"
        },
        {
          "current": {
            "selected": true,
            "text": "39.6",
            "value": "39.6"
          },
          "description": "Energy in each m³ of gas. Used to convert gas consumption from m³ to kWh.\n[ kWh = m³ x Calorific Value x Volumetric Correction ÷ 3.6 ]\nAppears to stay constant year-round. \n(Value available on energy bill)",
          "hide": 0,
          "label": "(Gas) Calorific Value ",
          "name": "gas_cal_value",
          "options": [
            {
              "selected": true,
              "text": "39.6",
              "value": "39.6"
            }
          ],
          "query": "39.6",
          "skipUrlSync": false,
          "type": "textbox"
        },
        {
          "current": {
            "selected": true,
            "text": "1.02264",
            "value": "1.02264"
          },
          "description": "Correction for pressure/temperature of gas. Used to convert gas consumption from m³ to kWh.\n[ kWh = m³ x Calorific Value x Volumetric Correction ÷ 3.6 ]\nAppears to stay constant year-round. \n(Value available on energy bill)",
          "hide": 0,
          "label": "(Gas) Volumetric Correction",
          "name": "gas_vol_correction",
          "options": [
            {
              "selected": true,
              "text": "1.02264",
              "value": "1.02264"
            }
          ],
          "query": "1.02264",
          "skipUrlSync": false,
          "type": "textbox"
        },
        {
          "current": {
            "selected": false,
            "text": "All",
            "value": "$__all"
          },
          "datasource": {
            "type": "prometheus",
            "uid": "P4169E866C3094E38"
          },
          "definition": "label_values(ha_entity_available{entity=~\".*_power.*|.*_energy.*|.*_temp.*|.*_humidity.*|.*brightness.*|.*_current.*|.*_occupancy.*|proximity..*|.*_battery.*\"},entity)",
          "description": "List of HA entities. Only certain entity types are included - those which we can use for displaying useful metrics.\n(Update variable filters to change list if needed).",
          "hide": 0,
          "includeAll": true,
          "label": "Home Assistant Entities",
          "multi": true,
          "name": "ha_entities",
          "options": [],
          "query": {
            "query": "label_values(ha_entity_available{entity=~\".*_power.*|.*_energy.*|.*_temp.*|.*_humidity.*|.*brightness.*|.*_current.*|.*_occupancy.*|proximity..*|.*_battery.*\"},entity)",
            "refId": "PrometheusVariableQueryEditor-VariableQuery"
          },
          "refresh": 1,
          "regex": "",
          "skipUrlSync": false,
          "sort": 0,
          "type": "query"
        },
        {
          "current": {
            "selected": true,
            "text": [
              "Backgarden"
            ],
            "value": [
              "Backgarden"
            ]
          },
          "datasource": {
            "type": "prometheus",
            "uid": "P4169E866C3094E38"
          },
          "definition": "label_values(ha_binary_sensor_state{entity=~\".*_occupancy\"},friendly_name)",
          "hide": 0,
          "includeAll": true,
          "label": "HA Camera Area",
          "multi": true,
          "name": "ha_camera_area",
          "options": [],
          "query": {
            "query": "label_values(ha_binary_sensor_state{entity=~\".*_occupancy\"},friendly_name)",
            "refId": "PrometheusVariableQueryEditor-VariableQuery"
          },
          "refresh": 1,
          "regex": "(.*) .* occupancy",
          "skipUrlSync": false,
          "sort": 1,
          "type": "query"
        }
      ]
    },
    "time": {
      "from": "now-60d",
      "to": "now"
    },
    "timepicker": {},
    "timezone": "",
    "title": "Home Automation",
    "uid": "de3d8dbc-8de7-4d1f-b080-b11cb4eb5492",
    "weekStart": ""
  }
}
