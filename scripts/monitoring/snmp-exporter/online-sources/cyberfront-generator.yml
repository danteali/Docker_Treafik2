# FROM: https://blog.cyberfront.org/index.php/2021/12/31/debian-prometheus-snmp/

auths:
  public_v2:
    version: 2
    community: public

modules:

  # =================================================================================================
  # EDGE ROUTER
  # =================================================================================================
  edgerouter:
    timeout: 10s
    retries: 3
    walk:
      - hrSystemUptime
      - hrSystemNumUsers
      - hrSystemProcesses
      - hrStorage
      - interfaces
      - ipTrafficStats
      - ipInReceives
      - ipInHdrErrors
      - ipInAddrErrors
      - ipForwDatagrams
      - ipInUnknownProtos
      - ipInDiscards
      - ipInDelivers
      - ipOutRequests
      - ipOutDiscards
      - ipOutNoRoutes
      - ipReasmReqds
      - ipReasmOKs
      - ipReasmFails
      - ipFragOKs
      - ipFragFails
      - ipFragCreates
      - icmp
      - ifXTable
      - 1.3.6.1.4.1.2021.4 # UCD memory
      - 1.3.6.1.4.1.2021.10 # UCD Load
      - systemStats
    lookups:
      - source_indexes: [ifIndex]
        lookup: ifAlias
        drop_source_indexes: true
      - source_indexes: [ipIfStatsIfIndex]
        lookup: ifAlias
        drop_source_indexes: true
      - source_indexes: [hrStorageIndex]
        lookup: hrStorageDescr
        drop_source_indexes: true
      - source_indexes: [laIndex]
        lookup: laNames
        drop_source_indexes: true
      - source_indexes: [bgpPeerRemoteAddr]
        lookup: bgpPeerRemoteAs
    overrides:
      bgpPeerState:
        type: EnumAsStateSet
      bgpPeerAdminStatus:
        type: EnumAsStateSet

  # =================================================================================================
  # Ubiquiti / UniFi
  # =================================================================================================
  #
  # http://dl.ubnt-ut.com/snmp/UBNT-MIB
  # http://dl.ubnt-ut.com/snmp/UBNT-UniFi-MIB
  #
  # =================================================================================================
  ubiquiti_unifi:
      timeout: 10s
      retries: 3
      walk:
        - sysUpTime
        - interfaces
        - ifXTable
      overrides:
        ifType:
          type: EnumAsInfo